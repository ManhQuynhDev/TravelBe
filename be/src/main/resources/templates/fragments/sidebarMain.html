<div id="sidebarMain" class="d-none" th:fragment="sidebarMain">
    <aside
        class="js-navbar-vertical-aside navbar navbar-vertical-aside navbar-vertical navbar-vertical-fixed navbar-expand-xl navbar-default navbar-vertical-aside-initialized border-right">
        <div class="navbar-vertical-container">
            <div class="navbar-vertical-footer-offset">
                <div class="navbar-brand-wrapper justify-content-between" id="navbarBrandWrapper">
                    <a class="navbar-brand" aria-label="Front">
                        <img class="navbar-brand-logo" th:src="@{/assets/svg/logos/logo.svg}" alt="Logo">
                        <p id="navbarText">Travel With Me</p>
                        <img class="navbar-brand-logo-mini" th:src="@{/assets/svg/logos/logo.svg}" alt="Logo">
                    </a>
                    <button type="button"
                        class="js-navbar-vertical-aside-toggle-invoker navbar-vertical-aside-toggle btn btn-icon btn-xs btn-ghost-dark">
                        <i class="tio-clear tio-lg"></i>
                    </button>
                </div>
                <div class="navbar-vertical-content">
                    <ul class="navbar-nav navbar-nav-lg nav-tabs">
                        <li class="nav-item">
                            <a th:href="@{/web-server/}" class="js-nav-tooltip-link nav-link" title="Dashboards"
                                data-placement="left">
                                <i class="tio-home-vs-1-outlined nav-icon"></i>
                                <span
                                    class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <small class="nav-subtitle" title="Manage">Manage</small>
                            <small class="tio-more-horizontal nav-subtitle-replacer"></small>
                        </li>
                        <li class="nav-item">
                            <a th:href="@{/web-server/users}" class="js-navbar-vertical-aside-menu-link nav-link"
                                title="Users">
                                <i class="tio-user-big nav-icon"></i>
                                <span class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Users</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a th:href="@{/web-server/posts}" class="js-navbar-vertical-aside-menu-link nav-link"
                                title="Posts">
                                <i class="tio-comment-image nav-icon"></i>
                                <span class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Posts</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a th:href="@{/web-server/groups}" class="js-navbar-vertical-aside-menu-link nav-link"
                                title="Groups">
                                <i class="tio-group-junior nav-icon"></i>
                                <span
                                    class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Groups</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a th:href="@{/web-server/comments}" class="js-navbar-vertical-aside-menu-link nav-link"
                                title="Groups">
                                <i class="tio-comment-text nav-icon"></i>
                                <span
                                    class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Comments</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a th:href="@{/web-server/stories}" class="js-navbar-vertical-aside-menu-link nav-link"
                                title="Stories">
                                <i class="tio-apps nav-icon"></i>
                                <span
                                    class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Stories</span>
                            </a>
                        </li>

                        <li class="nav-item" id="managerSection">
                            <a th:href="@{/web-server/manager}" class="js-navbar-vertical-aside-menu-link nav-link"
                                title="Manager">
                                <i class="tio-apps nav-icon"></i>
                                <span
                                    class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Manager</span>
                            </a>
                        </li>


                        <li class="nav-item">
                            <a th:href="@{/web-server/message-group}"
                                class="js-navbar-vertical-aside-menu-link nav-link" title="Stories">
                                <i class="tio-apps nav-icon"></i>
                                <span
                                    class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Message</span>
                            </a>
                        </li>


                        <li class="nav-item">
                            <a th:href="@{/web-server/activity}" class="js-navbar-vertical-aside-menu-link nav-link"
                                title="Activity">
                                <i class="tio-calendar nav-icon"></i>
                                <span
                                    class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Activity</span>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a th:href="@{/web-server/travel-plan}"
                                class="js-navbar-vertical-aside-menu-link nav-link" title="Travel Plan">
                                <i class="tio-map nav-icon"></i>
                                <span class="navbar-vertical-aside-mini-mode-hidden-elements text-truncate">Travel
                                    Plan</span>
                            </a>
                        </li>

                        <div class="navbar-vertical-footer">
                            <ul class="navbar-vertical-footer-list">
                                <li class="navbar-vertical-footer-list-item">
                                    <div class="hs-unfold">
                                        <a class="js-hs-unfold-invoker btn btn-icon btn-ghost-secondary rounded-circle"
                                            href="javascript:;" data-hs-unfold-options="{
                                      &quot;target&quot;: &quot;#styleSwitcherDropdown&quot;,
                                      &quot;type&quot;: &quot;css-animation&quot;,
                                      &quot;animationIn&quot;: &quot;fadeInRight&quot;,
                                      &quot;animationOut&quot;: &quot;fadeOutRight&quot;,
                                      &quot;hasOverlay&quot;: true,
                                      &quot;smartPositionOff&quot;: true
                                     }" data-hs-unfold-target="#styleSwitcherDropdown" data-hs-unfold-invoker="">
                                            <i class="tio-tune"></i>
                                        </a>
                                    </div>
                                </li>
                                <li class="navbar-vertical-footer-list-item">
                                    <div class="hs-unfold">
                                        <a class="js-hs-unfold-invoker btn btn-icon btn-ghost-secondary rounded-circle"
                                            href="javascript:;" data-hs-unfold-options="{
                                      &quot;target&quot;: &quot;#languageDropdown&quot;,
                                      &quot;type&quot;: &quot;css-animation&quot;,
                                      &quot;animationIn&quot;: &quot;slideInDown&quot;,
                                      &quot;hideOnScroll&quot;: true
                                     }" data-hs-unfold-target="#languageDropdown" data-hs-unfold-invoker="">
                                            <img class="avatar avatar-xss avatar-circle"
                                                th:src="@{/assets/vendor/flag-icon-css/flags/1x1/us.svg}"
                                                alt="United States Flag">
                                        </a>

                                        <div id="languageDropdown"
                                            class="hs-unfold-content dropdown-unfold dropdown-menu navbar-vertical-footer-dropdown hs-unfold-hidden hs-unfold-content-initialized hs-unfold-css-animation animated hs-unfold-reverse-y"
                                            data-hs-target-height="262.712" data-hs-unfold-content=""
                                            data-hs-unfold-content-animation-in="slideInDown"
                                            data-hs-unfold-content-animation-out="fadeOut"
                                            style="animation-duration: 300ms;">
                                            <span class="dropdown-header">Select language</span>
                                            <a class="dropdown-item" href="#">
                                                <img class="avatar avatar-xss avatar-circle mr-2"
                                                    th:src="@{/assets/vendor/flag-icon-css/flags/1x1/us.svg}"
                                                    alt="Flag">
                                                <span class="text-truncate pr-2" title="English">English (US)</span>
                                            </a>
                                            <a class="dropdown-item" href="#">
                                                <img class="avatar avatar-xss avatar-circle mr-2"
                                                    th:src="@{/assets/vendor/flag-icon-css/flags/1x1/gb.svg}"
                                                    alt="Flag">
                                                <span class="text-truncate pr-2" title="English">English (UK)</span>
                                            </a>
                                            <a class="dropdown-item" href="#">
                                                <img class="avatar avatar-xss avatar-circle mr-2"
                                                    th:src="@{/assets/vendor/flag-icon-css/flags/1x1/de.svg}"
                                                    alt="Flag">
                                                <span class="text-truncate pr-2" title="Deutsch">Deutsch</span>
                                            </a>
                                            <a class="dropdown-item" href="#">
                                                <img class="avatar avatar-xss avatar-circle mr-2"
                                                    th:src="@{/assets/vendor/flag-icon-css/flags/1x1/dk.svg}"
                                                    alt="Flag">
                                                <span class="text-truncate pr-2" title="Dansk">Dansk</span>
                                            </a>
                                            <a class="dropdown-item" href="#">
                                                <img class="avatar avatar-xss avatar-circle mr-2"
                                                    th:src="@{/assets/vendor/flag-icon-css/flags/1x1/it.svg}"
                                                    alt="Flag">
                                                <span class="text-truncate pr-2" title="Italiano">Italiano</span>
                                            </a>
                                            <a class="dropdown-item" href="#">
                                                <img class="avatar avatar-xss avatar-circle mr-2"
                                                    th:src="@{/assets/vendor/flag-icon-css/flags/1x1/cn.svg}"
                                                    alt="Flag">
                                                <span class="text-truncate pr-2" title="中文 (繁體)">中文 (繁體)</span>
                                            </a>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </aside>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const userRole = localStorage.getItem('userRole');
        console.log(userRole);


        if (userRole === "MANAGER") {
            const managerSection = document.getElementById("managerSection");
            if (managerSection) {
                managerSection.style.display = 'none';
            }
        }

    });
    //     document.addEventListener("DOMContentLoaded", () => {
    //     // Hàm cập nhật tab active
    //     function updateActiveTab() {
    //         // Lấy tất cả các phần tử nav-item
    //         const menuItems = document.querySelectorAll('.navbar-nav .nav-item');

    //         // Lấy URL hiện tại (sử dụng pathname để tránh vấn đề với hash hoặc search)
    //         const currentPath = window.location.pathname;

    //         // Lặp qua tất cả các phần tử menu và thêm class active cho mục tương ứng
    //         menuItems.forEach(item => {
    //             const link = item.querySelector('a');
    //             const linkHref = link.getAttribute('href');

    //             // Kiểm tra nếu URL hiện tại có chứa phần href của link (chính xác hơn so với chỉ dùng "includes")
    //             if (linkHref && currentPath.includes(linkHref)) {
    //                 item.classList.add('active'); // Thêm class active
    //             } else {
    //                 item.classList.remove('active'); // Loại bỏ class active
    //             }
    //         });
    //     }

    //     // Gọi hàm ngay khi trang được tải
    //     updateActiveTab();

    //     // Lắng nghe sự kiện thay đổi URL trong SPA (khi sử dụng history.pushState hoặc replaceState)
    //     window.onpopstate = function () {
    //         updateActiveTab();
    //     };

    //     // Lắng nghe sự kiện click vào các tab (nếu không thay đổi URL trực tiếp)
    //     const tabs = document.querySelectorAll('.navbar-nav .nav-item a');
    //     tabs.forEach(tab => {
    //         tab.addEventListener('click', function () {
    //             updateActiveTab(); // Cập nhật tab active khi người dùng chuyển tab
    //         });
    //     });
    // });
    document.addEventListener("DOMContentLoaded", () => {
        const menuItems = document.querySelectorAll('.nav-item');

        const currentUrl = new URL(window.location.href);

        menuItems.forEach(item => {
            const link = item.querySelector('a');
            if (link) {
                const linkHref = new URL(link.getAttribute('href'), window.location.origin); 

                if (currentUrl.pathname === linkHref.pathname) {
                    item.classList.add('active'); 
                } else {
                    item.classList.remove('active'); 
                }
            }
        });
    });




</script>